{% block date_widget %}
    {% if widget == 'single_text' %}
        {{ block('form_widget_simple') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            {{ date_pattern|replace({
                '{{ year }}':  form_widget(form.year),
                '{{ month }}': form_widget(form.month),
                '{{ day }}':   form_widget(form.day),
            })|raw }}
        </div>
    {% endif %}

    {% set script %}
    <script>
        $("[type=date],.date").datepicker(
            $.extend({}, $.datepicker.regional['{{ app.request.locale }}'], {
                showWeek: true,
                dateFormat: "{{ format_converter.convert('ICU', 'jQuery', form.vars['date_pattern']) }}"
                }
            )
        );
    </script>
    {% endset %}

    {{ scripts.add(script) }}
{% endblock %}
